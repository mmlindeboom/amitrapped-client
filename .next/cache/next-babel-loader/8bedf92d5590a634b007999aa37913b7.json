{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/mattl/Dev/personal/amitrapped/client/components/SignupForm.js\";\nimport React from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport { gql } from 'apollo-boost';\nimport { useState } from 'react';\nimport { Button, Dimmer, Loader, Form, Grid, Header, Message, Segment } from 'semantic-ui-react';\nimport { Container } from 'next/app';\nimport { loginReadyFor } from '../lib/auth';\nimport { SIGNUP_USER } from '../data/user';\n\nvar useLoginForm = function useLoginForm(callback) {\n  var _useState = useState({\n    email: '',\n    password: '',\n    passwordConfirmation: '',\n    firstName: '',\n    lastName: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      inputs = _useState2[0],\n      setInputs = _useState2[1];\n\n  var handleSubmit = function handleSubmit(e) {\n    if (e) e.preventDefault();\n    callback();\n  };\n\n  var handleChange = function handleChange(e) {\n    e.persist();\n    setInputs(_objectSpread({}, inputs, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  return {\n    handleSubmit: handleSubmit,\n    handleChange: handleChange,\n    inputs: inputs\n  };\n};\n\nvar SignupForm = function SignupForm(_ref) {\n  var token = _ref.token;\n\n  var _useMutation = useMutation(SIGNUP_USER),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      signup = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      loading = _useMutation2$.loading,\n      data = _useMutation2$.data,\n      error = _useMutation2$.error;\n\n  var _useLoginForm = useLoginForm(function () {\n    return signup({\n      variables: inputs\n    });\n  }),\n      inputs = _useLoginForm.inputs,\n      handleChange = _useLoginForm.handleChange,\n      handleSubmit = _useLoginForm.handleSubmit;\n\n  if (data && data.signUp.token) {\n    loginReadyFor(data.signUp.token);\n  }\n\n  return React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, error && React.createElement(Message, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, error.message), loading && React.createElement(Dimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(Loader, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  })), React.createElement(Grid, {\n    textAlign: \"center\",\n    style: {\n      height: '100vh'\n    },\n    verticalAlign: \"middle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(Grid.Column, {\n    style: {\n      maxWidth: 450\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(Header, {\n    as: \"h2\",\n    color: \"teal\",\n    textAlign: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, \"Create an account\"), React.createElement(Form, {\n    size: \"large\",\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(Segment, {\n    stacked: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(Form.Input, {\n    fluid: true,\n    icon: \"user\",\n    iconPosition: \"left\",\n    placeholder: \"E-mail address\",\n    name: \"email\",\n    value: inputs.email,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }), React.createElement(Form.Input, {\n    fluid: true,\n    icon: \"lock\",\n    iconPosition: \"left\",\n    placeholder: \"Password\",\n    type: \"password\",\n    name: \"password\",\n    value: inputs.password,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }), React.createElement(Form.Input, {\n    fluid: true,\n    icon: \"lock\",\n    iconPosition: \"left\",\n    placeholder: \"Password\",\n    type: \"password\",\n    name: \"passwordConfirmation\",\n    value: inputs.passwordConfirmation,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }), React.createElement(Form.Input, {\n    fluid: true,\n    icon: \"lock\",\n    iconPosition: \"left\",\n    placeholder: \"First Name\",\n    name: \"firstName\",\n    value: inputs.firstName,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }), React.createElement(Form.Input, {\n    fluid: true,\n    icon: \"lock\",\n    iconPosition: \"left\",\n    placeholder: \"Last Name\",\n    name: \"lastName\",\n    value: inputs.lastName,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }), React.createElement(Button, {\n    color: \"teal\",\n    fluid: true,\n    size: \"large\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"Sign Up\"))), React.createElement(Message, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \"New to us? \", React.createElement(\"a\", {\n    href: \"#\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"Sign Up\")))));\n};\n\nexport default SignupForm;","map":{"version":3,"sources":["/Users/mattl/Dev/personal/amitrapped/client/components/SignupForm.js"],"names":["React","useMutation","gql","useState","Button","Dimmer","Loader","Form","Grid","Header","Message","Segment","Container","loginReadyFor","SIGNUP_USER","useLoginForm","callback","email","password","passwordConfirmation","firstName","lastName","inputs","setInputs","handleSubmit","e","preventDefault","handleChange","persist","target","name","value","SignupForm","token","signup","loading","data","error","variables","signUp","message","height","maxWidth"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,GAAT,QAAoB,cAApB;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,SAASC,MAAT,EAAiBC,MAAjB,EAAyBC,MAAzB,EAAiCC,IAAjC,EAAuCC,IAAvC,EAA6CC,MAA7C,EAAqDC,OAArD,EAA8DC,OAA9D,QAA6E,mBAA7E;AACA,SAASC,SAAT,QAA0B,UAA1B;AACA,SAASC,aAAT,QAA8B,aAA9B;AACA,SAASC,WAAT,QAA4B,cAA5B;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,QAAD,EAAc;AAAA,kBACLb,QAAQ,CAAC;AACHc,IAAAA,KAAK,EAAE,EADJ;AAEHC,IAAAA,QAAQ,EAAE,EAFP;AAGHC,IAAAA,oBAAoB,EAAE,EAHnB;AAIHC,IAAAA,SAAS,EAAE,EAJR;AAKHC,IAAAA,QAAQ,EAAE;AALP,GAAD,CADH;AAAA;AAAA,MAC1BC,MAD0B;AAAA,MAClBC,SADkB;;AAQjC,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,CAAD,EAAO;AAC1B,QAAIA,CAAJ,EAAOA,CAAC,CAACC,cAAF;AACPV,IAAAA,QAAQ;AACT,GAHD;;AAIA,MAAMW,YAAY,GAAG,SAAfA,YAAe,CAACF,CAAD,EAAO;AAC1BA,IAAAA,CAAC,CAACG,OAAF;AACAL,IAAAA,SAAS,mBAAKD,MAAL,sBAAcG,CAAC,CAACI,MAAF,CAASC,IAAvB,EAA8BL,CAAC,CAACI,MAAF,CAASE,KAAvC,GAAT;AACD,GAHD;;AAKA,SAAO;AACLP,IAAAA,YAAY,EAAZA,YADK;AAELG,IAAAA,YAAY,EAAZA,YAFK;AAGLL,IAAAA,MAAM,EAANA;AAHK,GAAP;AAKD,CAtBD;;AAyBA,IAAMU,UAAU,GAAG,SAAbA,UAAa,OAAe;AAAA,MAAZC,KAAY,QAAZA,KAAY;;AAAA,qBACShC,WAAW,CAACa,WAAD,CADpB;AAAA;AAAA,MACzBoB,MADyB;AAAA;AAAA,MAChBC,OADgB,kBAChBA,OADgB;AAAA,MACPC,IADO,kBACPA,IADO;AAAA,MACDC,KADC,kBACDA,KADC;;AAAA,sBAEatB,YAAY,CAAC;AAAA,WAAMmB,MAAM,CAAC;AAACI,MAAAA,SAAS,EAAEhB;AAAZ,KAAD,CAAZ;AAAA,GAAD,CAFzB;AAAA,MAEzBA,MAFyB,iBAEzBA,MAFyB;AAAA,MAEjBK,YAFiB,iBAEjBA,YAFiB;AAAA,MAEHH,YAFG,iBAEHA,YAFG;;AAIhC,MAAIY,IAAI,IAAIA,IAAI,CAACG,MAAL,CAAYN,KAAxB,EAA+B;AAC7BpB,IAAAA,aAAa,CAACuB,IAAI,CAACG,MAAL,CAAYN,KAAb,CAAb;AACD;;AAED,SACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGI,KAAK,IACJ,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAUA,KAAK,CAACG,OAAhB,CAFJ,EAIGL,OAAO,IACN,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAQ,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAR,CALJ,EAOE,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAC,QAAhB;AAAyB,IAAA,KAAK,EAAE;AAAEM,MAAAA,MAAM,EAAE;AAAV,KAAhC;AAAqD,IAAA,aAAa,EAAC,QAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD,CAAM,MAAN;AAAa,IAAA,KAAK,EAAE;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,EAAE,EAAC,IAAX;AAAgB,IAAA,KAAK,EAAC,MAAtB;AAA6B,IAAA,SAAS,EAAC,QAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,EAKE,oBAAC,IAAD;AAAM,IAAA,IAAI,EAAC,OAAX;AAAmB,IAAA,QAAQ,EAAElB,YAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,OAAD;AAAS,IAAA,OAAO,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,KAAK,MAAjB;AAAkB,IAAA,IAAI,EAAC,MAAvB;AAA8B,IAAA,YAAY,EAAC,MAA3C;AACE,IAAA,WAAW,EAAC,gBADd;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,KAAK,EAAEF,MAAM,CAACL,KAHhB;AAIE,IAAA,QAAQ,EAAEU,YAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAOE,oBAAC,IAAD,CAAM,KAAN;AACE,IAAA,KAAK,MADP;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,YAAY,EAAC,MAHf;AAIE,IAAA,WAAW,EAAC,UAJd;AAKE,IAAA,IAAI,EAAC,UALP;AAME,IAAA,IAAI,EAAC,UANP;AAOE,IAAA,KAAK,EAAEL,MAAM,CAACJ,QAPhB;AAQE,IAAA,QAAQ,EAAES,YARZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,EAiBE,oBAAC,IAAD,CAAM,KAAN;AACE,IAAA,KAAK,MADP;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,YAAY,EAAC,MAHf;AAIE,IAAA,WAAW,EAAC,UAJd;AAKE,IAAA,IAAI,EAAC,UALP;AAME,IAAA,IAAI,EAAC,sBANP;AAOE,IAAA,KAAK,EAAEL,MAAM,CAACH,oBAPhB;AAQE,IAAA,QAAQ,EAAEQ,YARZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBF,EA2BE,oBAAC,IAAD,CAAM,KAAN;AACE,IAAA,KAAK,MADP;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,YAAY,EAAC,MAHf;AAIE,IAAA,WAAW,EAAC,YAJd;AAKE,IAAA,IAAI,EAAC,WALP;AAME,IAAA,KAAK,EAAEL,MAAM,CAACF,SANhB;AAOE,IAAA,QAAQ,EAAEO,YAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA3BF,EAoCE,oBAAC,IAAD,CAAM,KAAN;AACE,IAAA,KAAK,MADP;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,YAAY,EAAC,MAHf;AAIE,IAAA,WAAW,EAAC,WAJd;AAKE,IAAA,IAAI,EAAC,UALP;AAME,IAAA,KAAK,EAAEL,MAAM,CAACD,QANhB;AAOE,IAAA,QAAQ,EAAEM,YAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IApCF,EA+CE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,MAAd;AAAqB,IAAA,KAAK,MAA1B;AAA2B,IAAA,IAAI,EAAC,OAAhC;AAAwC,IAAA,IAAI,EAAC,QAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eA/CF,CADF,CALF,EA0DE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACa;AAAG,IAAA,IAAI,EAAC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADb,CA1DF,CADF,CAPF,CADF;AAyEA,CAjFF;;AAmFA,eAAeK,UAAf","sourcesContent":["import React from 'react';\nimport { useMutation } from '@apollo/react-hooks'\nimport { gql } from 'apollo-boost'\nimport { useState } from 'react'\nimport { Button, Dimmer, Loader, Form, Grid, Header, Message, Segment } from 'semantic-ui-react'\nimport { Container } from 'next/app';\nimport { loginReadyFor } from '../lib/auth'\nimport { SIGNUP_USER } from '../data/user'\n\nconst useLoginForm = (callback) => {\n  const [inputs, setInputs] = useState({\n                                    email: '',\n                                    password: '',\n                                    passwordConfirmation: '',\n                                    firstName: '',\n                                    lastName: ''\n                                  })\n  const handleSubmit = (e) => {\n    if (e) e.preventDefault()\n    callback()\n  }\n  const handleChange = (e) => {\n    e.persist()\n    setInputs({...inputs, [e.target.name]: e.target.value})\n  }\n\n  return {\n    handleSubmit,\n    handleChange,\n    inputs\n  }\n}\n\n\nconst SignupForm = ({ token }) => {\n  const [signup, {loading, data, error}] = useMutation(SIGNUP_USER)\n  const {inputs, handleChange, handleSubmit} = useLoginForm(() => signup({variables: inputs}))\n\n  if (data && data.signUp.token) {\n    loginReadyFor(data.signUp.token)\n  }\n\n  return (\n    <Container>\n      {error &&\n        <Message>{error.message}</Message>\n      }\n      {loading &&\n        <Dimmer><Loader></Loader></Dimmer>\n      }\n      <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n        <Grid.Column style={{ maxWidth: 450 }}>\n          <Header as='h2' color='teal' textAlign='center'>\n            Create an account\n          </Header>\n\n          <Form size='large' onSubmit={handleSubmit}>\n            <Segment stacked>\n              <Form.Input fluid icon='user' iconPosition='left'\n                placeholder='E-mail address'\n                name=\"email\"\n                value={inputs.email}\n                onChange={handleChange}\n              />\n              <Form.Input\n                fluid\n                icon='lock'\n                iconPosition='left'\n                placeholder='Password'\n                type='password'\n                name='password'\n                value={inputs.password}\n                onChange={handleChange}\n              />\n              <Form.Input\n                fluid\n                icon='lock'\n                iconPosition='left'\n                placeholder='Password'\n                type='password'\n                name='passwordConfirmation'\n                value={inputs.passwordConfirmation}\n                onChange={handleChange}\n              />\n              <Form.Input\n                fluid\n                icon='lock'\n                iconPosition='left'\n                placeholder='First Name'\n                name='firstName'\n                value={inputs.firstName}\n                onChange={handleChange}\n              />\n              <Form.Input\n                fluid\n                icon='lock'\n                iconPosition='left'\n                placeholder='Last Name'\n                name='lastName'\n                value={inputs.lastName}\n                onChange={handleChange}\n              />\n\n\n              <Button color='teal' fluid size='large' type=\"submit\">\n                Sign Up\n              </Button>\n            </Segment>\n          </Form>\n          <Message>\n            New to us? <a href='#'>Sign Up</a>\n          </Message>\n        </Grid.Column>\n      </Grid>\n    </Container>\n)}\n\nexport default SignupForm"]},"metadata":{},"sourceType":"module"}