{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/mattl/Dev/personal/amitrapped/client/components/LoginForm.js\";\nimport React from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport { useState } from 'react';\nimport { Button, Dimmer, Loader, Form, Grid, Header, Message, Segment } from 'semantic-ui-react';\nimport { Container, Link } from 'next/app';\nimport { loginReadyFor } from '../lib/auth';\nimport { Router } from 'next/router';\nimport { AUTHENTICATE_USER } from '../data/user';\n\nvar useLoginForm = function useLoginForm(callback) {\n  var _useState = useState({\n    email: '',\n    password: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      inputs = _useState2[0],\n      setInputs = _useState2[1];\n\n  var handleSubmit = function handleSubmit(e) {\n    if (e) e.preventDefault();\n    callback();\n  };\n\n  var handleChange = function handleChange(e) {\n    e.persist();\n    setInputs(_objectSpread({}, inputs, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  return {\n    handleSubmit: handleSubmit,\n    handleChange: handleChange,\n    inputs: inputs\n  };\n};\n\nvar Login = function Login(_ref) {\n  var token = _ref.token;\n\n  var _useMutation = useMutation(AUTHENTICATE_USER),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      login = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      loading = _useMutation2$.loading,\n      data = _useMutation2$.data,\n      error = _useMutation2$.error;\n\n  var _useLoginForm = useLoginForm(function () {\n    return login({\n      variables: inputs\n    });\n  }),\n      inputs = _useLoginForm.inputs,\n      handleChange = _useLoginForm.handleChange,\n      handleSubmit = _useLoginForm.handleSubmit;\n\n  if (token) {\n    Router.push('/home');\n  }\n\n  if (data && data.login.token) {\n    loginReadyFor(data.login.token);\n  }\n\n  return React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, error && React.createElement(Message, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, error.message), loading && React.createElement(Dimmer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(Loader, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  })), React.createElement(Grid, {\n    textAlign: \"center\",\n    style: {\n      height: '100vh'\n    },\n    verticalAlign: \"middle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(Grid.Column, {\n    style: {\n      maxWidth: 450\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(Header, {\n    as: \"h2\",\n    color: \"teal\",\n    textAlign: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"Log-in to your account\"), React.createElement(Form, {\n    size: \"large\",\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(Segment, {\n    stacked: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(Form.Input, {\n    fluid: true,\n    icon: \"user\",\n    iconPosition: \"left\",\n    placeholder: \"E-mail address\",\n    name: \"email\",\n    value: inputs.email,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }), React.createElement(Form.Input, {\n    fluid: true,\n    icon: \"lock\",\n    iconPosition: \"left\",\n    placeholder: \"Password\",\n    type: \"password\",\n    name: \"password\",\n    value: inputs.password,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }), React.createElement(Button, {\n    color: \"teal\",\n    fluid: true,\n    size: \"large\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"Login\"))), React.createElement(Message, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"New to us? \", React.createElement(Link, {\n    href: \"/signup\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"Sign Up\")))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/mattl/Dev/personal/amitrapped/client/components/LoginForm.js"],"names":["React","useMutation","useState","Button","Dimmer","Loader","Form","Grid","Header","Message","Segment","Container","Link","loginReadyFor","Router","AUTHENTICATE_USER","useLoginForm","callback","email","password","inputs","setInputs","handleSubmit","e","preventDefault","handleChange","persist","target","name","value","Login","token","login","loading","data","error","variables","push","message","height","maxWidth"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useMutation } from '@apollo/react-hooks'\nimport { useState } from 'react'\nimport { Button, Dimmer, Loader, Form, Grid, Header, Message, Segment } from 'semantic-ui-react'\nimport { Container, Link } from 'next/app';\nimport { loginReadyFor } from '../lib/auth'\nimport { Router } from 'next/router';\nimport { AUTHENTICATE_USER } from '../data/user'\n\nconst useLoginForm = (callback) => {\n  const [inputs, setInputs] = useState({email: '', password: ''})\n  const handleSubmit = (e) => {\n    if (e) e.preventDefault()\n    callback()\n  }\n  const handleChange = (e) => {\n    e.persist()\n    setInputs({...inputs, [e.target.name]: e.target.value})\n  }\n\n  return {\n    handleSubmit,\n    handleChange,\n    inputs\n  }\n}\n\n\nconst Login = ({ token }) => {\n  const [login, {loading, data, error}] = useMutation(AUTHENTICATE_USER)\n  const {inputs, handleChange, handleSubmit} = useLoginForm(() => login({variables: inputs}))\n\n  if (token) {\n    Router.push('/home')\n  }\n  if (data && data.login.token) {\n    loginReadyFor(data.login.token)\n  }\n\n  return (\n    <Container>\n      {error &&\n        <Message>{error.message}</Message>\n      }\n      {loading &&\n        <Dimmer><Loader></Loader></Dimmer>\n      }\n      <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n        <Grid.Column style={{ maxWidth: 450 }}>\n          <Header as='h2' color='teal' textAlign='center'>\n            Log-in to your account\n          </Header>\n\n          <Form size='large' onSubmit={handleSubmit}>\n            <Segment stacked>\n              <Form.Input fluid icon='user' iconPosition='left'\n                placeholder='E-mail address'\n                name=\"email\"\n                value={inputs.email}\n                onChange={handleChange}\n              />\n              <Form.Input\n                fluid\n                icon='lock'\n                iconPosition='left'\n                placeholder='Password'\n                type='password'\n                name='password'\n                value={inputs.password}\n                onChange={handleChange}\n              />\n\n              <Button color='teal' fluid size='large' type=\"submit\">\n                Login\n              </Button>\n            </Segment>\n          </Form>\n          <Message>\n            New to us? <Link href='/signup'>Sign Up</Link>\n          </Message>\n        </Grid.Column>\n      </Grid>\n    </Container>\n)}\n\nexport default Login"]},"metadata":{},"sourceType":"module"}