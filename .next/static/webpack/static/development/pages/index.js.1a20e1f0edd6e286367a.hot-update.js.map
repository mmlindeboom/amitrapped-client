{"version":3,"file":"static/webpack/static/development/pages/index.js.1a20e1f0edd6e286367a.hot-update.js","sources":["webpack:///./components/LoginForm.js"],"sourcesContent":["import React from 'react';\nimport { useMutation } from '@apollo/react-hooks'\nimport { useState } from 'react'\nimport { Button, Dimmer, Loader, Form, Grid, Header, Message, Segment } from 'semantic-ui-react'\nimport { Container } from 'next/app';\nimport Link from 'next/link'\nimport { loginReadyFor } from '../lib/auth'\nimport { Router } from 'next/router';\nimport { AUTHENTICATE_USER } from '../data/user'\n\nconst useLoginForm = (callback) => {\n  const [inputs, setInputs] = useState({email: '', password: ''})\n  const handleSubmit = (e) => {\n    if (e) e.preventDefault()\n    callback()\n  }\n  const handleChange = (e) => {\n    e.persist()\n    setInputs({...inputs, [e.target.name]: e.target.value})\n  }\n\n  return {\n    handleSubmit,\n    handleChange,\n    inputs\n  }\n}\n\n\nconst Login = ({ token }) => {\n  const [login, {loading, data, error}] = useMutation(AUTHENTICATE_USER)\n  const {inputs, handleChange, handleSubmit} = useLoginForm(() => login({variables: inputs}))\n\n  if (token) {\n    Router.push('/home')\n  }\n  if (data && data.login.token) {\n    loginReadyFor(data.login.token)\n  }\n\n  return (\n    <Container>\n      {error &&\n        <Message>{error.message}</Message>\n      }\n      {loading &&\n        <Dimmer><Loader></Loader></Dimmer>\n      }\n      <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n        <Grid.Column style={{ maxWidth: 450 }}>\n          <Header as='h2' color='teal' textAlign='center'>\n            Log-in to your account\n          </Header>\n\n          <Form size='large' onSubmit={handleSubmit}>\n            <Segment stacked>\n              <Form.Input fluid icon='user' iconPosition='left'\n                placeholder='E-mail address'\n                name=\"email\"\n                value={inputs.email}\n                onChange={handleChange}\n              />\n              <Form.Input\n                fluid\n                icon='lock'\n                iconPosition='left'\n                placeholder='Password'\n                type='password'\n                name='password'\n                value={inputs.password}\n                onChange={handleChange}\n              />\n\n              <Button color='teal' fluid size='large' type=\"submit\">\n                Login\n              </Button>\n            </Segment>\n          </Form>\n          <Message>\n            New to us? <Link href='/signup'>Sign Up</Link>\n          </Message>\n        </Grid.Column>\n      </Grid>\n    </Container>\n)}\n\nexport default Login"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AADA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAEA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;;;;A","sourceRoot":""}